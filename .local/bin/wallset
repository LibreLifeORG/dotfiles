#!/bin/sh

#find $HOME/.local/share/wallpapers -type f | sed '/paper.txt/d' | fzf | sed 's|^.*/wallpapers/||' > $HOME/.local/share/wallpapers/paper.txt

(find $HOME/.local/share/wallpapers -type f && cat $HOME/.local/share/wallpapers/history.txt) | sed '/paper.txt/d' | sed '/history.txt/d' | tail -r | awk '!seen[$0]++' | fzf | sed 's|^.*/wallpapers/||' > $HOME/.local/share/wallpapers/paper.txt

cat $HOME/.local/share/wallpapers/paper.txt >> $HOME/.local/share/wallpapers/history.txt

xwallpaper --focus $HOME/.local/share/wallpapers/$(cat $HOME/.local/share/wallpapers/paper.txt)
